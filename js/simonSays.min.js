const simonScore=document.getElementById("simonScore"),hiScore=document.getElementById("hiScore"),score=document.getElementById("score"),simonColors=["chatButton","rantButton","puzzleButton","curiousButton"];let gameOn=!1,sequence=[],userSequence=[],round=0;const gameOverAudio=new Audio("./assets/GameOver.mp3"),chatButtonAudio=new Audio("./assets/Beep1.mp3"),rantButtonAudio=new Audio("./assets/Beep2.mp3"),puzzleButtonAudio=new Audio("./assets/Beep3.mp3"),curiousButtonAudio=new Audio("./assets/Beep4.mp3");async function startGame(){blockElements(!0),chatbox.classList.add("simonOn");let e=localStorage.getItem("simonSaysMaxScore");simonScore.classList.remove("hide"),hiScore.innerHTML=e;const t=document.getElementsByClassName("mood");Array.from(t).forEach((e=>{e.classList.add("hide")})),puzzleButton.classList.remove("hide"),chatbox.innerHTML="";let o=Number(localStorage.getItem("simonSaysIntroCount"));await typeText(chatbox,rantCPUobj.simonSaysIntro[o]),await typeText(chatbox,rantCPUobj.simonSaysConfirm[0]),o+=1,o==rantCPUobj.simonSaysIntro.length&&(o=0),localStorage.setItem("simonSaysIntroCount",o),sequence=[],userSequence=[],round=0,gameOn=!0,userInput.disabled=!1,userInput.classList.remove("disabled"),userInput.focus()}function nextRound(){blockElements(!0),displaySequence()}function displaySequence(){userSequence=[],addToSequence(),showColors(sequence)}function addToSequence(){const e=simonColors[Math.floor(4*Math.random())];sequence.push(e)}function showColors(e){let t=0;const o=setInterval((()=>{highlightButton(e[t]),t++,t>=e.length&&(clearInterval(o),blockElements(!1))}),800)}function highlightButton(e){const t=document.getElementById(e);switch(t.classList.remove("hide"),e){case"chatButton":chatButtonAudio.play();break;case"rantButton":rantButtonAudio.play();break;case"puzzleButton":puzzleButtonAudio.play();break;case"curiousButton":curiousButtonAudio.play()}setTimeout((()=>{t.classList.add("hide")}),500)}async function checkSequence(){for(let e=0;e<userSequence.length;e++)if(userSequence[e]!==sequence[e]){blockElements(!0),gameOn=!1,gameOverAudio.play();let e=Number(localStorage.getItem("simonSaysGameOverCount")),t=Number(localStorage.getItem("simonSaysMaxScore"));return round>t&&(hiScore.innerHTML=round,localStorage.setItem("simonSaysMaxScore",round)),e+=1,e>=rantCPUobj.simonSaysGameOver.length&&(e=0),localStorage.setItem("simonSaysGameOverCount",e),void gameOver()}userSequence.length===sequence.length&&(round++,setTimeout((()=>{score.innerHTML=round,scorePoint.play(),nextRound()}),500))}async function endGame(){gameOn=!1,gameOverAudio.play(),simonScore.classList.add("hide"),chatbox.classList.remove("simonOn"),score.innerHTML="0",chatbox.innerHTML="",await typeText(chatbox,rantCPUobj.simonSaysCanceled[0]),setTimeout((()=>{chatMode()}),500)}